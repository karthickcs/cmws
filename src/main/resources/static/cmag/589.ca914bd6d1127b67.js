"use strict";(self.webpackChunkcmag=self.webpackChunkcmag||[]).push([[589],{3589:(N,p,l)=>{l.r(p),l.d(p,{ReportsModule:()=>b});var g=l(6895),u=l(646),t=l(1571),h=l(1137),T=l(2126),c=l(1679),Z=l(9384),s=l(433),f=l(4631),d=l(9061);function m(i,o){1&i&&(t.TgZ(0,"h5")(1,"a",22),t._uU(2,"+ SEARCH PANEL"),t.qZA()())}function _(i,o){if(1&i&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.taskid),t.xp6(1),t.AsE(" ",e.taskname," ---\x3e ",e.taskid," ")}}function A(i,o){if(1&i&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.runid),t.xp6(1),t.hij(" Run Id ---\x3e ",e.runid," ")}}function U(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"label",7),t._uU(3,"Task ID"),t.qZA(),t.TgZ(4,"select",23),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.taskid=a)})("ngModelChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadruniddata(!1))}),t.TgZ(5,"option",9),t._uU(6,"Select Task"),t.qZA(),t.YNc(7,_,2,3,"option",10),t.qZA()()(),t.TgZ(8,"div",5)(9,"div",6)(10,"label",24),t._uU(11,"Run ID"),t.qZA(),t.TgZ(12,"select",25),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.runidselect=a)})("ngModelChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.loadrunid())}),t.TgZ(13,"option",9),t._uU(14,"Select RunID"),t.qZA(),t.YNc(15,A,2,2,"option",10),t.qZA()()(),t._UZ(16,"hr"),t.TgZ(17,"div",15)(18,"table",16)(19,"thead")(20,"tr",17)(21,"th"),t._uU(22,"TaskName"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"TaskId"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Status"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"RunId"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"RowCount"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Filelocation1"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Filelocation2"),t.qZA()()(),t.TgZ(35,"tbody")(36,"tr",18)(37,"td"),t._uU(38),t.qZA(),t.TgZ(39,"td"),t._uU(40),t.qZA(),t.TgZ(41,"td"),t._uU(42),t.qZA(),t.TgZ(43,"td"),t._uU(44),t.qZA(),t.TgZ(45,"td"),t._uU(46),t.qZA(),t.TgZ(47,"td"),t._uU(48),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.taskid),t.xp6(3),t.Q6J("ngForOf",e.taskmainArray),t.xp6(5),t.Q6J("ngModel",e.runidselect),t.xp6(3),t.Q6J("ngForOf",e.dplistenArray),t.xp6(23),t.Oqu(e.dplistenentry.taskname),t.xp6(2),t.Oqu(e.dplistenentry.taskid),t.xp6(2),t.Oqu(e.dplistenentry.status),t.xp6(2),t.Oqu(e.dplistenentry.runid),t.xp6(2),t.Oqu(e.dplistenentry.rowcount),t.xp6(2),t.Oqu(e.dplistenentry.filelocation),t.xp6(2),t.Oqu(e.dplistenentry.filelocationt2)}}function q(i,o){if(1&i&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.maintranid),t.xp6(1),t.hij(" TranId ---\x3e ",e.maintranid," ")}}function v(i,o){if(1&i&&(t.TgZ(0,"tr",18)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"input",19),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"input",27),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"input",19),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"input",28),t.qZA()()),2&i){const e=o.$implicit,n=o.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("value",e.field),t.xp6(2),t.s9C("value",e.oldval),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("value",e.field),t.xp6(2),t.s9C("value",e.newval)}}function C(i,o){if(1&i&&(t.TgZ(0,"tr",18)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"input",19),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"input",29),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"input",19),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"input",30),t.qZA()()),2&i){const e=o.$implicit,n=o.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("value",e.field),t.xp6(2),t.s9C("value",e.oldval),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("value",e.field)}}function O(i,o){if(1&i&&(t.TgZ(0,"tr",18)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"input",19),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"input",30),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"input",19),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"input",29),t.qZA()()),2&i){const e=o.$implicit,n=o.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.s9C("value",e.field),t.xp6(4),t.Oqu(n+1),t.xp6(2),t.s9C("value",e.field),t.xp6(2),t.s9C("value",e.oldval)}}const y=[{path:"",component:(()=>{class i{constructor(e,n,a,r,R,M){this.taskControllerService=e,this.diffTableControllerService=n,this.dpListenControllerService=a,this.alertService=r,this.cdr=R,this.route=M,this.options={autoClose:!1,keepAfterRouteChange:!1},this.changeDTO={},this.changeDTOArray=[],this.addDTO={},this.addDTOArray=[],this.removeDTO={},this.removeDTOArray=[],this.diffTableDTO={},this.jsondiff={},this.diffTableDTOArray=[],this.taskMainDTO={},this.dplistenentry={},this.taskmainArray=[],this.taskid=0,this.dplistenArray=[],this.runid=0,this.runidselect=0,this.tranid=0,this.addfields={},this.removefields={},this.tabledata={}}ngOnInit(){this.loaddata(),this.diffTableDTO={},this.route.params.subscribe(e=>{e.taskid&&(this.taskid=e.taskid,this.runidselect=e.runid,this.tranid=e.tranid,this.loadruniddata(!0),this.tranid=e.tranid,this.loadtramdata()),e.id&&(this.taskid=e.id,this.loadruniddata(!1))}),this.tabledata=l(7555)}loaddata(){this.taskControllerService.getTasknainUsingGET().subscribe(e=>{this.taskmainArray=e},e=>{console.log(e)})}loadruniddata(e){this.dpListenControllerService.getRunIdsUsingGET(this.taskid).subscribe(n=>{this.dplistenArray=n,e||(this.runidselect=this.dplistenArray.reduce((a,r)=>Math.max(a,r.runid),0)),this.loadrunid()},n=>{console.log(n)})}loadrunid(){this.dplistenentry=this.dplistenArray.find(e=>e.runid==this.runidselect),this.loaddifftable()}loaddifftable(){this.diffTableControllerService.getDiffDataUsingPOST({taskid:""+this.dplistenentry.taskid,runid:this.dplistenentry.runid}).subscribe(n=>{this.diffTableDTOArray=n,this.diffTableDTOArray[0]&&this.loadtramdata()},n=>{console.log(n)})}loadtramdata(){this.addDTOArray=[],this.removeDTOArray=[],this.changeDTOArray=[],this.diffTableDTO=this.diffTableDTOArray.find(r=>r.maintranid==this.tranid);let e="";for(var n of(e=this.diffTableDTO.difference,e=e.split("(").join("["),e=e.split(")").join("]"),this.jsondiff=JSON.parse(e),this.diffTableDTO.difference=e,this.changeDTOArray=[],this.jsondiff)){if(console.log(n),console.log(n[0]),"add"==n[0])for(var a of n[2])this.addDTO={},this.addDTO.field=this.gettname(a[0]),this.addDTO.oldval=a[1],this.addDTOArray.push(this.addDTO);if("remove"==n[0])for(var a of n[2])this.removeDTO={},this.removeDTO.field=this.gettname(a[0]),this.removeDTO.oldval=a[1],this.removeDTOArray.push(this.removeDTO);"change"==n[0]&&(this.changeDTO={},this.changeDTO.field=this.gettname(n[1]),this.changeDTO.oldval=n[2][0],this.changeDTO.newval=n[2][1],this.changeDTOArray.push(this.changeDTO))}}gettname(e){let n=e.replace("INSERTING on FBNK_","");n=n.replace("UPDATING on FBNK_",""),n=n.replace("DELETING on FBNK_",""),n=n.replace("/row/","");let a=n.split(":"),r="";return this.tabledata[a[0].replace("_",".").replace("001","")]?(r=this.tabledata[a[0].replace("_",".").replace("001","")][a[2].toUpperCase()],a[0].replace("_",".").replace("001","")+"."+r):e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.Y),t.Y36(T.Z),t.Y36(c.u),t.Y36(Z.c9),t.Y36(t.sBO),t.Y36(u.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-reports"]],decls:130,vars:10,consts:[["activeIds","static-1",1,"next-accordion",3,"closeOthers"],["id","static-1"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","exampleFormControlSelect1"],["name","tranid","id","tranid",1,"form-select",3,"ngModel","ngModelChange"],["value","0","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12"],["cardTitle","Comparision",3,"options"],[1,"col-md-12"],["action","javascript:"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"table-primary"],[1,"table-light"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","blue",3,"value"],["colspan","2"],["class","table-light",4,"ngFor","ngForOf"],["href","javascript:"],["name","taskid","id","taskid",1,"form-select",3,"ngModel","ngModelChange"],["for","exampleFormControlSelect2"],["name","runidselect","id","runidselect",1,"form-select",3,"ngModel","ngModelChange"],[3,"value"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","rgb(5, 92, 57)",3,"value"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","red",3,"value"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","green",3,"value"],["type","text","value","Missing Tags","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","red"]],template:function(e,n){1&e&&(t.TgZ(0,"ngb-accordion",0)(1,"ngb-panel",1),t.YNc(2,m,3,0,"ng-template",2),t.YNc(3,U,51,11,"ng-template",3),t.qZA()(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),t._uU(8,"Transaction ID"),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"select",8),t.NdJ("ngModelChange",function(r){return n.tranid=r})("ngModelChange",function(){return n.loadtramdata()}),t.TgZ(11,"option",9),t._uU(12,"Select TransactionID"),t.qZA(),t.YNc(13,q,2,2,"option",10),t.qZA()()(),t._UZ(14,"br"),t.TgZ(15,"div",4)(16,"div",11)(17,"app-card",12)(18,"div",4)(19,"div",13)(20,"form",14)(21,"div",15)(22,"table",16)(23,"thead")(24,"tr",17)(25,"th"),t._uU(26,"#"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"BaseSystem -Transactionid"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"UpdatedSystem -Transactionid"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Difference"),t.qZA()()(),t.TgZ(33,"tbody")(34,"tr",18)(35,"td"),t._uU(36,"1"),t.qZA(),t.TgZ(37,"td"),t._UZ(38,"input",19),t.qZA(),t.TgZ(39,"td"),t._UZ(40,"input",19),t.qZA(),t.TgZ(41,"td"),t._UZ(42,"input",19),t.qZA()()()()(),t.TgZ(43,"h4"),t._uU(44,"Difference"),t.qZA(),t.TgZ(45,"div",15)(46,"table",16)(47,"thead")(48,"tr",17)(49,"th"),t._uU(50,"#"),t.qZA(),t.TgZ(51,"th",20),t._uU(52,"Base System"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"#"),t.qZA(),t.TgZ(55,"th",20),t._uU(56,"Updated System"),t.qZA()(),t.TgZ(57,"tr",17)(58,"th"),t._uU(59,"#"),t.qZA(),t.TgZ(60,"th"),t._uU(61,"ColumnName"),t.qZA(),t.TgZ(62,"th"),t._uU(63,"Value"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"#"),t.qZA(),t.TgZ(66,"th"),t._uU(67,"ColumnName"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Value"),t.qZA()()(),t.TgZ(70,"tbody"),t.YNc(71,v,13,6,"tr",21),t.qZA()()(),t.TgZ(72,"h4"),t._uU(73,"Missing "),t.qZA(),t.TgZ(74,"div",15)(75,"table",16)(76,"thead")(77,"tr",17)(78,"th"),t._uU(79,"#"),t.qZA(),t.TgZ(80,"th",20),t._uU(81,"Base System"),t.qZA(),t.TgZ(82,"th"),t._uU(83,"#"),t.qZA(),t.TgZ(84,"th",20),t._uU(85,"Updated System"),t.qZA()(),t.TgZ(86,"tr",17)(87,"th"),t._uU(88,"#"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"ColumnName"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Value"),t.qZA(),t.TgZ(93,"th"),t._uU(94,"#"),t.qZA(),t.TgZ(95,"th"),t._uU(96,"ColumnName"),t.qZA(),t.TgZ(97,"th"),t._uU(98,"Value"),t.qZA()()(),t.TgZ(99,"tbody"),t.YNc(100,C,13,5,"tr",21),t.qZA()()(),t.TgZ(101,"h4"),t._uU(102,"Additional"),t.qZA(),t.TgZ(103,"div",15)(104,"table",16)(105,"thead")(106,"tr",17)(107,"th"),t._uU(108,"#"),t.qZA(),t.TgZ(109,"th",20),t._uU(110,"Base System"),t.qZA(),t.TgZ(111,"th"),t._uU(112,"#"),t.qZA(),t.TgZ(113,"th",20),t._uU(114,"Updated System"),t.qZA()(),t.TgZ(115,"tr",17)(116,"th"),t._uU(117,"#"),t.qZA(),t.TgZ(118,"th"),t._uU(119,"ColumnName"),t.qZA(),t.TgZ(120,"th"),t._uU(121,"Value"),t.qZA(),t.TgZ(122,"th"),t._uU(123,"#"),t.qZA(),t.TgZ(124,"th"),t._uU(125,"ColumnName"),t.qZA(),t.TgZ(126,"th"),t._uU(127,"Value"),t.qZA()()(),t.TgZ(128,"tbody"),t.YNc(129,O,13,5,"tr",21),t.qZA()()()()()()()()()()),2&e&&(t.Q6J("closeOthers",!0),t.xp6(10),t.Q6J("ngModel",n.tranid),t.xp6(3),t.Q6J("ngForOf",n.diffTableDTOArray),t.xp6(4),t.Q6J("options",!1),t.xp6(21),t.s9C("value",n.diffTableDTO.maintranid),t.xp6(2),t.s9C("value",n.diffTableDTO.newtranid),t.xp6(2),t.s9C("value",n.diffTableDTO.countval),t.xp6(29),t.Q6J("ngForOf",n.changeDTOArray),t.xp6(29),t.Q6J("ngForOf",n.removeDTOArray),t.xp6(29),t.Q6J("ngForOf",n.addDTOArray))},dependencies:[g.sg,s._Y,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.On,s.F,f.A,d.gY,d.Gk,d.Cu,d.gW]}),i})()}];let x=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(y),u.Bz]}),i})();var D=l(700);let b=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,Z.nM,x,D.m,d.lQ,d.Gs]}),i})()}}]);