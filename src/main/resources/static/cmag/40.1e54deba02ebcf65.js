"use strict";(self.webpackChunkcmag=self.webpackChunkcmag||[]).push([[40],{5040:(F,h,l)=>{l.r(h),l.d(h,{ViewaccModule:()=>N});var p=l(6895),g=l(646),u=l(7489),e=l(1571),T=l(1137),_=l(2126),Z=l(1679),m=l(9384),c=l(433),f=l(4631),d=l(9061);function A(i,s){1&i&&(e.TgZ(0,"h5")(1,"a",14),e._uU(2,"SEARCH PANEL"),e.qZA()())}function O(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.taskid),e.xp6(1),e.AsE(" ",t.taskname," ---\x3e ",t.taskid," ")}}function y(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.runid),e.xp6(1),e.hij(" Run Id ---\x3e ",t.runid," ")}}function b(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"label",17),e._uU(3,"Task ID"),e.qZA(),e.TgZ(4,"select",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.taskid=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.loadruniddata(!1))}),e.TgZ(5,"option",19),e._uU(6,"Select Task"),e.qZA(),e.YNc(7,O,2,3,"option",20),e.qZA()(),e.TgZ(8,"div",16)(9,"label",21),e._uU(10,"Run ID"),e.qZA(),e.TgZ(11,"select",22),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.runidselect=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.loadrunid())}),e.TgZ(12,"option",19),e._uU(13,"Select RunID"),e.qZA(),e.YNc(14,y,2,2,"option",20),e.qZA()()(),e.TgZ(15,"div",23)(16,"table",24)(17,"thead")(18,"tr",25)(19,"th"),e._uU(20,"TaskName"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"TaskId"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Type"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Jdbcurlsys1"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Jdbcurlsys2"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"usernamesys1"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"usernamesys2"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"dbtypesys1"),e.qZA(),e.TgZ(35,"th"),e._uU(36,"tablenamesys1"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"dbtypesys2"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"tablenamesys2"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"RowCount"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Filelocation1"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Filelocation2"),e.qZA()()(),e.TgZ(47,"tbody")(48,"tr",26)(49,"td"),e._uU(50),e.qZA(),e.TgZ(51,"td"),e._uU(52),e.qZA(),e.TgZ(53,"td"),e._uU(54),e.qZA(),e.TgZ(55,"td"),e._uU(56),e.qZA(),e.TgZ(57,"td"),e._uU(58),e.qZA(),e.TgZ(59,"td"),e._uU(60),e.qZA(),e.TgZ(61,"td"),e._uU(62),e.qZA(),e.TgZ(63,"td"),e._uU(64),e.qZA(),e.TgZ(65,"td"),e._uU(66),e.qZA(),e.TgZ(67,"td"),e._uU(68),e.qZA(),e.TgZ(69,"td"),e._uU(70),e.qZA(),e.TgZ(71,"td"),e._uU(72),e.qZA(),e.TgZ(73,"td"),e._uU(74),e.qZA(),e.TgZ(75,"td"),e._uU(76),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.taskid),e.xp6(3),e.Q6J("ngForOf",t.taskmainArray),e.xp6(4),e.Q6J("ngModel",t.runidselect),e.xp6(3),e.Q6J("ngForOf",t.dplistenArray),e.xp6(36),e.Oqu(t.dplistenentry.taskname),e.xp6(2),e.Oqu(t.dplistenentry.taskid),e.xp6(2),e.Oqu(t.dplistenentry.sys1type),e.xp6(2),e.Oqu(t.dplistenentry.jdbcurlsys1),e.xp6(2),e.Oqu(t.dplistenentry.jdbcurlsys2),e.xp6(2),e.Oqu(t.dplistenentry.usernamesys1),e.xp6(2),e.Oqu(t.dplistenentry.usernamesys2),e.xp6(2),e.Oqu(t.dplistenentry.dbtypesys1),e.xp6(2),e.Oqu(t.dplistenentry.tablenamesys1),e.xp6(2),e.Oqu(t.dplistenentry.dbtypesys2),e.xp6(2),e.Oqu(t.dplistenentry.tablenamesys2),e.xp6(2),e.Oqu(t.dplistenentry.rowcount),e.xp6(2),e.Oqu(t.dplistenentry.filelocation),e.xp6(2),e.Oqu(t.dplistenentry.filelocationt2)}}function x(i,s){if(1&i&&(e.TgZ(0,"h5")(1,"a",14),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.key)}}function v(i,s){1&i&&(e.TgZ(0,"thead")(1,"tr",25)(2,"th"),e._uU(3,"#"),e.qZA(),e.TgZ(4,"th",36),e._uU(5,"Base System"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",36),e._uU(9,"Updated System"),e.qZA()()())}function C(i,s){if(1&i&&(e.TgZ(0,"tr",26),e._UZ(1,"td"),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",37),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"input",38),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"input",37),e.qZA(),e.TgZ(12,"td"),e._UZ(13,"input",39),e.qZA()()),2&i){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(2),e.s9C("value",t.column),e.xp6(2),e.s9C("value",t.oldval),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.s9C("value",t.column),e.xp6(2),e.s9C("value",t.newval)}}function D(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"table",30),e.YNc(1,v,10,0,"ng-template",31),e.TgZ(2,"tbody")(3,"tr",32)(4,"td")(5,"b"),e._uU(6,"TransactionID"),e.qZA()(),e.TgZ(7,"td",33)(8,"a",34),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onMaintrainid(o.key,r.dplistenentry.runid,r.dplistenentry.taskid))}),e.TgZ(9,"u"),e._uU(10),e.qZA()()()(),e.YNc(11,C,14,6,"tr",35),e.qZA()()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(9),e.Oqu(t.key.split("|")[1]),e.xp6(1),e.Q6J("ngForOf",t.value)}}function q(i,s){if(1&i&&(e.YNc(0,D,12,3,"table",29),e.ALo(1,"keyvalue")),2&i){const t=e.oxw().$implicit;e.Q6J("ngForOf",e.lcZ(1,1,t.value))}}function U(i,s){1&i&&(e.TgZ(0,"ngb-panel",28),e.YNc(1,x,3,1,"ng-template",2),e.YNc(2,q,2,3,"ng-template",3),e.qZA()),2&i&&e.MGl("id","static-",s.index+1,"")}const w=[{path:"",component:(()=>{class i{constructor(t,n,a,o,r,V){this.taskControllerService=t,this.diffTableControllerService=n,this.dpListenControllerService=a,this.alertService=o,this.cdr=r,this.router=V,this.searchtext="",this.options={autoClose:!1,keepAfterRouteChange:!1},this.oldvaltname="",this.changeDTO={},this.changeDTOArray=[],this.addDTO={},this.addDTOArray=[],this.removeDTO={},this.removeDTOArray=[],this.diffTableDTO={},this.jsondiff={},this.diffTableDTOArray=[],this.taskMainDTO={},this.dplistenentry={},this.taskmainArray=[],this.taskid=0,this.dplistenArray=[],this.runid=0,this.runidselect=0,this.tranid=0,this.addfields={},this.removefields={},this.tabledata={},this.grouped={},this.groupedoriginal={}}ngOnInit(){console.log(Object.keys({a:"somestring",b:42,c:!1})),this.loaddata(),this.tabledata=l(7555)}loaddata(){this.taskControllerService.getTasknainUsingGET().subscribe(t=>{this.taskmainArray=t},t=>{console.log(t)})}loadruniddata(t){this.dpListenControllerService.getRunIdsUsingGET(this.taskid).subscribe(n=>{this.dplistenArray=n,t||(this.runidselect=this.dplistenArray.reduce((a,o)=>Math.max(a,o.runid),0)),this.loadrunid()},n=>{console.log(n)})}loadrunid(){this.dplistenentry=this.dplistenArray.find(t=>t.runid==this.runidselect),this.loaddifftable()}loaddifftable(){this.diffTableDTO.taskid=""+this.dplistenentry.taskid,this.diffTableDTO.runid=this.dplistenentry.runid,this.diffTableControllerService.getDiffDataUsingPOST(this.diffTableDTO).subscribe(t=>{this.diffTableDTOArray=t,this.diffTableDTOArray[0]&&(this.tranid=this.diffTableDTOArray[0].maintranid,this.loadDifferenceTable())},t=>{console.log(t)})}loadDifferenceTable(){for(var t of(this.addDTOArray=[],this.removeDTOArray=[],this.changeDTOArray=[],this.cdr.detectChanges(),this.changeDTOArray=[],this.diffTableDTOArray)){let r="";for(var n of(r=t.difference,r=r.split("(").join("["),r=r.split(")").join("]"),this.jsondiff=JSON.parse(r),t.difference=r,this.jsondiff)){if(console.log(n),console.log(n[0]),"add"==n[0])for(var a of n[2])this.addDTO={},this.addDTO.tname=this.gettname(a[0]),this.addDTO.column=this.getcolumnname(a[0]),this.addDTO.oldval="Missing Tags",this.addDTO.newval=a[1],this.addDTO.maintranid=t.maintranid,this.addDTO.runid=t.runid,this.addDTO.taskid=t.taskid,this.changeDTOArray.push(this.addDTO);if("remove"==n[0])for(var a of n[2])this.removeDTO={},this.removeDTO.tname=this.gettname(a[0]),this.removeDTO.oldval=a[1],this.removeDTO.column=this.getcolumnname(a[0]),this.removeDTO.newval="Missing Tags",this.removeDTO.maintranid=t.maintranid,this.removeDTO.runid=t.runid,this.removeDTO.taskid=t.taskid,this.changeDTOArray.push(this.removeDTO);"change"==n[0]&&(this.changeDTO={},this.changeDTO.tname=this.gettname(n[1]),this.changeDTO.column=this.getcolumnname(n[1]),this.changeDTO.oldval=n[2][0],this.changeDTO.newval=n[2][1],this.changeDTO.maintranid=t.maintranid,this.changeDTO.runid=t.runid,this.changeDTO.taskid=t.taskid,this.changeDTOArray.push(this.changeDTO))}}const o=u.groupBy(this.changeDTOArray,"tname");this.grouped=u.mapValues(o,r=>u.groupBy(r,"maintranid")),this.groupedoriginal=this.grouped}gettname(t){let n=t.replace("INSERTING on FBNK_","");return n=n.replace("UPDATING on FBNK_",""),n=n.replace("DELETING on FBNK_",""),n=n.replace("/row/",""),n.split(":")[0].replace("_",".").replace("001","")}getcolumnname(t){let n=t.replace("INSERTING on FBNK_","");n=n.replace("UPDATING on FBNK_",""),n=n.replace("DELETING on FBNK_",""),n=n.replace("/row/","");let a=n.split(":"),o="";return this.tabledata[a[0].replace("_",".").replace("001","")]?(o=this.tabledata[a[0].replace("_",".").replace("001","")][a[2].toUpperCase()],o):t}onMaintrainid(t,n,a){this.router.navigate(["/reports",{taskid:a,runid:n,tranid:t}])}search(){this.grouped=Object.keys(this.groupedoriginal).filter(t=>t.includes(this.searchtext.toUpperCase())).reduce((t,n)=>(t[n]=this.groupedoriginal[n],t),{})}searchchange(){this.grouped=Object.keys(this.groupedoriginal).filter(t=>t.includes(this.searchtext.toUpperCase())).reduce((t,n)=>(t[n]=this.groupedoriginal[n],t),{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.Y),e.Y36(_.Z),e.Y36(Z.u),e.Y36(m.c9),e.Y36(e.sBO),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-viewacc"]],decls:18,vars:9,consts:[["activeIds","static-1",1,"next-accordion",3,"closeOthers"],["id","static-1"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"row"],[1,"col-sm-12"],["cardTitle","Comparision",3,"options"],[1,"col-md-12"],[1,"input-group"],["type","text","id","m-search","name","searchtext","id","searchtext","placeholder","Search . . .",1,"form-control",3,"ngModel","keydown","ngModelChange"],[1,"input-group-append","search-btn","btn","btn-primary"],[1,"feather","icon-search","input-group-text",3,"click"],[1,"next-accordion",3,"closeOthers"],[3,"id",4,"ngFor","ngForOf"],["href","javascript:"],[1,"form-row"],[1,"col-md-6"],["for","exampleFormControlSelect1"],["name","taskid","id","taskid",1,"form-select",3,"ngModel","ngModelChange"],["value","0","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","exampleFormControlSelect2"],["name","runidselect","id","runidselect",1,"form-select",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"table-primary"],[1,"table-light"],[3,"value"],[3,"id"],["style","margin-bottom: 0px;","class","table table-bordered table-sm",4,"ngFor","ngForOf"],[1,"table","table-bordered","table-sm",2,"margin-bottom","0px"],[3,"ngIf"],[1,"table-success"],["colspan","6"],[2,"width","96%","text-align","left","vertical-align","middle","color","blue",3,"click"],["class","table-light",4,"ngFor","ngForOf"],["colspan","3"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","blue",3,"value"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","rgb(5, 92, 57)",3,"value"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","red",3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"ngb-accordion",0)(1,"ngb-panel",1),e.YNc(2,A,3,0,"ng-template",2),e.YNc(3,b,77,18,"ng-template",3),e.qZA()(),e.TgZ(4,"div",4),e._UZ(5,"br"),e.TgZ(6,"div",4)(7,"div",5)(8,"app-card",6)(9,"div",4)(10,"div",7)(11,"div",8)(12,"input",9),e.NdJ("keydown",function(){return n.searchchange()})("ngModelChange",function(o){return n.searchtext=o}),e.qZA(),e.TgZ(13,"span",10)(14,"i",11),e.NdJ("click",function(){return n.search()}),e.qZA()()(),e.TgZ(15,"ngb-accordion",12),e.YNc(16,U,3,1,"ngb-panel",13),e.ALo(17,"keyvalue"),e.qZA()()()()()()()),2&t&&(e.Q6J("closeOthers",!0),e.xp6(8),e.Q6J("options",!1),e.xp6(4),e.Udp("width","330px"),e.Q6J("ngModel",n.searchtext),e.xp6(3),e.Q6J("closeOthers",!0),e.xp6(1),e.Q6J("ngForOf",e.lcZ(17,7,n.grouped)))},dependencies:[p.sg,p.O5,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.On,f.A,d.gY,d.Gk,d.Cu,d.gW,p.Nd]}),i})()}];let k=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(w),g.Bz]}),i})();var M=l(700);let N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,m.nM,k,M.m,d.lQ,d.Gs]}),i})()}}]);