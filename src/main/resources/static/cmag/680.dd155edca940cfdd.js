"use strict";(self.webpackChunkcmag=self.webpackChunkcmag||[]).push([[680],{3680:(D,p,r)=>{r.r(p),r.d(p,{TaskManagerModule:()=>J});var d=r(6895),m=r(646),e=r(1571),g=r(1137),h=r(1679),T=r(1441),f=r(3784),k=r(384),c=r(433),C=r(4631);function M(a,l){1&a&&(e.TgZ(0,"div",6),e.Hsn(1,1),e.qZA())}function _(a,l){1&a&&(e.TgZ(0,"div",7),e.Hsn(1,2),e.qZA())}const Z=[[["",8,"app-modal-body"]],[["",8,"app-modal-header"]],[["",8,"app-modal-footer"]]],v=function(a){return{in:a}},b=function(a,l){return{display:a,opacity:l}},y=[".app-modal-body",".app-modal-header",".app-modal-footer"];let A=(()=>{class a{constructor(){this.hideHeader=!1,this.hideFooter=!1,this.containerClick=!0,this.visible=!1,this.visibleAnimate=!1}ngOnInit(){}show(){this.visible=!0,setTimeout(()=>this.visibleAnimate=!0,100),document.querySelector("body").classList.add("modal-open")}hide(){this.visibleAnimate=!1,setTimeout(()=>this.visible=!1,300),document.querySelector("body").classList.remove("modal-open")}onContainerClicked(t){t.target.classList.contains("modal")&&!0===this.containerClick&&this.hide()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ui-modal"]],inputs:{dialogClass:"dialogClass",hideHeader:"hideHeader",hideFooter:"hideFooter",containerClick:"containerClick"},ngContentSelectors:y,decls:7,vars:10,consts:[["tabindex","-1","role","dialog","aria-hidden","true",1,"basic","modal","fade",3,"ngClass","ngStyle","click"],["role","document",1,"modal-dialog",3,"ngClass"],[1,"modal-content"],["class","modal-header",4,"ngIf"],[1,"modal-body"],["class","modal-footer",4,"ngIf"],[1,"modal-header"],[1,"modal-footer"]],template:function(t,n){1&t&&(e.F$t(Z),e.TgZ(0,"div",0),e.NdJ("click",function(s){return n.onContainerClicked(s)}),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,M,2,0,"div",3),e.TgZ(4,"div",4),e.Hsn(5),e.qZA(),e.YNc(6,_,2,0,"div",5),e.qZA()()()),2&t&&(e.Q6J("ngClass",e.VKq(5,v,n.visibleAnimate))("ngStyle",e.WLB(7,b,n.visible?"block":"none",n.visibleAnimate?1:0)),e.xp6(1),e.Q6J("ngClass",n.dialogClass),e.xp6(2),e.Q6J("ngIf",!n.hideHeader),e.xp6(3),e.Q6J("ngIf",!n.hideFooter))},dependencies:[d.mk,d.O5,d.PC],styles:[".basic.modal{background:rgba(0,0,0,.6);position:fixed;inset:0;z-index:1050;display:none;-webkit-overflow-scrolling:touch;outline:0}.basic.fade{opacity:0;transition:opacity .15s linear}.basic.fade.in{opacity:1}.basic.modal.fade.in .modal-dialog{transform:translate(0)}.basic.modal.fade .modal-dialog{transition:all .3s ease-out;transform:translateY(-25%)}.basic .basic-close{position:absolute;top:16px;right:16px}.basic .basic-close-light-box{position:absolute;top:-31px;right:-20px;font-size:30px;color:#fff;text-shadow:none}\n"],encapsulation:2}),a})();const U=["myModalClose"];function q(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"tr",31)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",32)(5,"img",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.onrun(s.taskid))}),e.qZA(),e._uU(6,"\xa0 "),e.TgZ(7,"img",34),e.NdJ("click",function(){const s=e.CHM(t).$implicit,i=e.oxw(),u=e.MAs(33);return i.onedit(s.taskid),e.KtG(u.show())}),e.qZA(),e._uU(8,"\xa0 "),e.TgZ(9,"img",35),e.NdJ("click",function(){const o=e.CHM(t),s=o.$implicit,i=o.index,u=e.oxw();return e.KtG(u.ondelete(s.taskid,i))}),e.qZA()()(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA()()}if(2&a){const t=l.$implicit,n=l.index;e.xp6(2),e.Oqu(n+1),e.xp6(9),e.Oqu(t.taskname),e.xp6(2),e.Oqu(t.taskid),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Oqu(t.createdby),e.xp6(2),e.Oqu(t.shared),e.xp6(2),e.Oqu(t.rowcount),e.xp6(2),e.Oqu(t.filelocation),e.xp6(2),e.Oqu(t.filelocation2)}}const O=[{path:"",component:(()=>{class a{constructor(t,n,o,s,i,u){this.taskControllerService=t,this.dpListenControllerService=n,this.fileControllerService=o,this.alertService=s,this.auth=i,this.router=u,this.options={autoClose:!0,keepAfterRouteChange:!1},this.taskMainDTO={},this.dplistenentry={},this.taskmainArray=[]}oncreate(){this.taskMainDTO={},this.taskMainDTO.createdby=2}ngOnInit(){this.loaddata()}loaddata(){this.taskControllerService.getTasknainUsingGET().subscribe(t=>{this.taskmainArray=t},t=>{console.log(t)})}ondelete(t,n){this.taskControllerService.deletetaskmainUsingDELETE(t).subscribe(o=>{this.alertService.success("Delete success",this.options),this.loaddata()},o=>{console.log(o)})}onedit(t){this.taskMainDTO=this.taskmainArray.find(n=>n.taskid==t)}onrun(t){this.taskMainDTO=this.taskmainArray.find(n=>n.taskid==t),this.dplistenentry.filelocation=this.taskMainDTO.filelocation,this.dplistenentry.filelocationt2=this.taskMainDTO.filelocation2,this.dplistenentry.rowcount=this.taskMainDTO.rowcount,this.dplistenentry.status="CREATED",this.dplistenentry.taskid=this.taskMainDTO.taskid,this.dplistenentry.taskname=this.taskMainDTO.taskname,this.dpListenControllerService.savedplistenUsingPOST(this.dplistenentry).subscribe(n=>{this.alertService.success("Run created succesful",this.options),setTimeout(()=>{this.router.navigate(["/reports",{id:this.taskMainDTO.taskid}])},1e3)},n=>{console.log(n)})}onFileSelected2(t){this.fileControllerService.uploadFileUsingPOST(t.currentTarget.files[0]).subscribe(o=>{this.alertService.success(o.fname+"upload succesful",this.options),this.taskMainDTO.filelocation2=o.fname},o=>{console.log(o)})}onFileSelected1(t){const n=event.currentTarget.files[0];this.fileControllerService.uploadFileUsingPOST(n).subscribe(o=>{this.alertService.success(o.fname+"upload succesful",this.options),this.taskMainDTO.filelocation=o.fname},o=>{console.log(o)})}createtaskmain(t){this.taskControllerService.savetaskmainUsingPOST(this.taskMainDTO).subscribe(n=>{this.loaddata(),this.modalClose.nativeElement.click()},n=>{console.log(n)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.Y),e.Y36(h.u),e.Y36(T.k),e.Y36(f.c),e.Y36(k.e),e.Y36(m.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-task-manager"]],viewQuery:function(t,n){if(1&t&&e.Gf(U,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modalClose=o.first)}},decls:73,vars:5,consts:[[1,"row"],[1,"col-xl-12"],["type","button","data-toggle","modal",1,"btn","btn-primary","btn-sm",3,"click"],["cardTitle","Task List","blockClass","table-border-style"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"table-primary"],["class","table-light",4,"ngFor","ngForOf"],[1,"col-xl-4","col-md-6"],["dialogClass","modal-dialog-centered"],["exampleModalPopoversLabel",""],[1,"app-modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","basic-close",3,"click"],["myModalClose",""],["aria-hidden","true"],[1,"app-modal-body"],[1,"col-md-6"],["action","javascript:"],[1,"form-group"],["type","text","name","taskname","placeholder","Enter Taskname",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","filelocation","placeholder","Browse filelocation","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","mb-3"],[1,"custom-file"],["type","file","id","inputGroupFile01",1,"custom-file-input",3,"change"],["type","text","name","filelocation2","placeholder","Browse filelocation2","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["type","number","name","rowcount","placeholder","Enter Row count",1,"form-control",3,"ngModel","ngModelChange"],[1,"app-modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"table-light"],["role","group","aria-label","Basic example",1,"btn-group","mb-2"],["src","assets/images/play.svg","alt","",1,"img-fluid",3,"click"],["src","assets/images/edit.svg","alt","",1,"img-fluid",3,"click"],["src","assets/images/delete.svg","alt","",1,"img-fluid",3,"click"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){e.CHM(o);const i=e.MAs(33);return n.oncreate(),e.KtG(i.show())}),e._uU(3,"CreateTask"),e.qZA(),e.TgZ(4,"app-card",3)(5,"div",4)(6,"table",5)(7,"thead")(8,"tr",6)(9,"th"),e._uU(10,"#"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Action"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"TaskName"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"TaskId"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Status"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Createdby"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Shared"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"RowCount"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Filelocation1"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Filelocation2"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,q,26,9,"tr",7),e.qZA()()()()(),e.TgZ(31,"div",8)(32,"app-ui-modal",9,10)(34,"div",11)(35,"h5",12),e._uU(36,"Create/Edit Task"),e.qZA(),e.TgZ(37,"button",13,14),e.NdJ("click",function(){e.CHM(o);const i=e.MAs(33);return e.KtG(i.hide())}),e.TgZ(39,"span",15),e._uU(40,"\xd7"),e.qZA()()(),e.TgZ(41,"div",16)(42,"div",17)(43,"form",18)(44,"div",19)(45,"label"),e._uU(46,"Task Name"),e.qZA(),e.TgZ(47,"input",20),e.NdJ("ngModelChange",function(i){return n.taskMainDTO.taskname=i}),e.qZA()(),e.TgZ(48,"div",19)(49,"label"),e._uU(50,"File location system1"),e.qZA(),e.TgZ(51,"input",21),e.NdJ("ngModelChange",function(i){return n.taskMainDTO.filelocation=i}),e.qZA()(),e.TgZ(52,"div",22)(53,"div",23)(54,"input",24),e.NdJ("change",function(i){return n.onFileSelected1(i)}),e.qZA()()(),e.TgZ(55,"div",19)(56,"label"),e._uU(57,"File location system2"),e.qZA(),e.TgZ(58,"input",25),e.NdJ("ngModelChange",function(i){return n.taskMainDTO.filelocation2=i}),e.qZA()(),e.TgZ(59,"div",22)(60,"div",23)(61,"input",26),e.NdJ("change",function(i){return n.onFileSelected2(i)}),e.qZA()()(),e.TgZ(62,"div",19)(63,"label"),e._uU(64,"Row count"),e.qZA(),e.TgZ(65,"input",27),e.NdJ("ngModelChange",function(i){return n.taskMainDTO.rowcount=i}),e.qZA()(),e._UZ(66,"br"),e.qZA()()(),e.TgZ(67,"div",28)(68,"button",29),e.NdJ("click",function(){e.CHM(o);const i=e.MAs(33);return e.KtG(i.hide())}),e._uU(69,"Close"),e.qZA(),e._uU(70,"\xa0 "),e.TgZ(71,"button",30),e.NdJ("click",function(i){return n.createtaskmain(i)}),e._uU(72,"Submit"),e.qZA()()()()()}2&t&&(e.xp6(30),e.Q6J("ngForOf",n.taskmainArray),e.xp6(17),e.Q6J("ngModel",n.taskMainDTO.taskname),e.xp6(4),e.Q6J("ngModel",n.taskMainDTO.filelocation),e.xp6(7),e.Q6J("ngModel",n.taskMainDTO.filelocation2),e.xp6(7),e.Q6J("ngModel",n.taskMainDTO.rowcount))},dependencies:[d.sg,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.On,c.F,C.A,A]}),a})()}];let S=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.Bz.forChild(O),m.Bz]}),a})();var x=r(700),F=r(9384);let J=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,F.nM,S,x.m]}),a})()}}]);