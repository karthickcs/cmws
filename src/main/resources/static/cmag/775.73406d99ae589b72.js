"use strict";(self.webpackChunkcmag=self.webpackChunkcmag||[]).push([[775],{4775:(w,g,s)=>{s.r(g),s.d(g,{ViewdifferenceModule:()=>U});var h=s(6895),u=s(646),e=s(1571),f=s(1137),m=s(2126),T=s(1679),p=s(9384),l=s(433),Z=s(4631),c=s(9061);function v(n,r){1&n&&(e.TgZ(0,"h5")(1,"a",11),e._uU(2,"+ SEARCH PANEL"),e.qZA()())}function O(n,r){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.taskid),e.xp6(1),e.AsE(" ",t.taskname," ---\x3e ",t.taskid," ")}}function A(n,r){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.runid),e.xp6(1),e.hij(" Run Id ---\x3e ",t.runid," ")}}function _(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",12)(2,"label",13),e._uU(3,"Task ID"),e.qZA(),e.TgZ(4,"select",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.taskid=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.loadruniddata(!1))}),e.TgZ(5,"option",15),e._uU(6,"Select Task"),e.qZA(),e.YNc(7,O,2,3,"option",16),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",12)(10,"label",17),e._uU(11,"Run ID"),e.qZA(),e.TgZ(12,"select",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.runidselect=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.loadrunid())}),e.TgZ(13,"option",15),e._uU(14,"Select RunID"),e.qZA(),e.YNc(15,A,2,2,"option",16),e.qZA()()(),e._UZ(16,"hr"),e.TgZ(17,"div",19)(18,"table",20)(19,"thead")(20,"tr",21)(21,"th"),e._uU(22,"TaskName"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"TaskId"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Status"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"RunId"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"RowCount"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Filelocation1"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Filelocation2"),e.qZA()()(),e.TgZ(35,"tbody")(36,"tr",22)(37,"td"),e._uU(38),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA(),e.TgZ(43,"td"),e._uU(44),e.qZA(),e.TgZ(45,"td"),e._uU(46),e.qZA(),e.TgZ(47,"td"),e._uU(48),e.qZA(),e.TgZ(49,"td"),e._uU(50),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.taskid),e.xp6(3),e.Q6J("ngForOf",t.taskmainArray),e.xp6(5),e.Q6J("ngModel",t.runidselect),e.xp6(3),e.Q6J("ngForOf",t.dplistenArray),e.xp6(23),e.Oqu(t.dplistenentry.taskname),e.xp6(2),e.Oqu(t.dplistenentry.taskid),e.xp6(2),e.Oqu(t.dplistenentry.status),e.xp6(2),e.Oqu(t.dplistenentry.runid),e.xp6(2),e.Oqu(t.dplistenentry.rowcount),e.xp6(2),e.Oqu(t.dplistenentry.filelocation),e.xp6(2),e.Oqu(t.dplistenentry.filelocationt2)}}function D(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",22)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",28),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"input",29),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"input",28),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"input",30),e.qZA(),e.TgZ(13,"td")(14,"a",31),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.onMaintrainid(o.maintranid,o.runid,o.taskid))}),e.TgZ(15,"u"),e._uU(16),e.qZA()()()()}if(2&n){const t=r.$implicit,i=r.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.s9C("value",t.column),e.xp6(2),e.s9C("value",t.oldval),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.s9C("value",t.column),e.xp6(2),e.s9C("value",t.newval),e.xp6(4),e.Oqu(t.maintranid)}}function C(n,r){if(1&n&&(e.TgZ(0,"div")(1,"div",19)(2,"table",20)(3,"thead")(4,"tr",21)(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th",24),e._uU(8,"Base System"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"#"),e.qZA(),e.TgZ(11,"th",24),e._uU(12,"Updated System"),e.qZA(),e.TgZ(13,"th",25),e._uU(14,"Links"),e.qZA()(),e.TgZ(15,"tr",21)(16,"th",26),e._uU(17),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,D,17,7,"tr",27),e.qZA()()()()),2&n){const t=r.$implicit;e.xp6(17),e.hij("",t.key," "),e.xp6(2),e.Q6J("ngForOf",t.value)}}const x=[{path:"",component:(()=>{class n{constructor(t,i,a,o,d,q){this.taskControllerService=t,this.diffTableControllerService=i,this.dpListenControllerService=a,this.alertService=o,this.cdr=d,this.router=q,this.options={autoClose:!1,keepAfterRouteChange:!1},this.oldvaltname="",this.changeDTO={},this.changeDTOArray=[],this.addDTO={},this.addDTOArray=[],this.removeDTO={},this.removeDTOArray=[],this.diffTableDTO={},this.jsondiff={},this.diffTableDTOArray=[],this.taskMainDTO={},this.dplistenentry={},this.taskmainArray=[],this.taskid=0,this.dplistenArray=[],this.runid=0,this.runidselect=0,this.tranid=0,this.addfields={},this.removefields={},this.tabledata={},this.grouped={}}ngOnInit(){console.log(Object.keys({a:"somestring",b:42,c:!1})),this.loaddata(),this.tabledata=s(7555)}loaddata(){this.taskControllerService.getTasknainUsingGET().subscribe(t=>{this.taskmainArray=t},t=>{console.log(t)})}loadruniddata(t){this.dpListenControllerService.getRunIdsUsingGET(this.taskid).subscribe(i=>{this.dplistenArray=i,t||(this.runidselect=this.dplistenArray.reduce((a,o)=>Math.max(a,o.runid),0)),this.loadrunid()},i=>{console.log(i)})}loadrunid(){this.dplistenentry=this.dplistenArray.find(t=>t.runid==this.runidselect),this.loaddifftable()}loaddifftable(){this.diffTableDTO.taskid=""+this.dplistenentry.taskid,this.diffTableDTO.runid=this.dplistenentry.runid,this.diffTableControllerService.getDiffDataUsingPOST(this.diffTableDTO).subscribe(t=>{this.diffTableDTOArray=t,this.diffTableDTOArray[0]&&(this.tranid=this.diffTableDTOArray[0].maintranid,this.loadDifferenceTable())},t=>{console.log(t)})}loadDifferenceTable(){for(var t of(this.addDTOArray=[],this.removeDTOArray=[],this.changeDTOArray=[],this.cdr.detectChanges(),this.changeDTOArray=[],this.diffTableDTOArray)){let o="";for(var i of(o=t.difference,o=o.split("(").join("["),o=o.split(")").join("]"),this.jsondiff=JSON.parse(o),t.difference=o,this.jsondiff)){if(console.log(i),console.log(i[0]),"add"==i[0])for(var a of i[2])this.addDTO={},this.addDTO.tname=this.gettname(a[0]),this.addDTO.column=this.getcolumnname(a[0]),this.addDTO.oldval="Missing Tags",this.addDTO.newval=a[1],this.addDTO.maintranid=t.maintranid,this.addDTO.runid=t.runid,this.addDTO.taskid=t.taskid,this.changeDTOArray.push(this.addDTO);if("remove"==i[0])for(var a of i[2])this.removeDTO={},this.removeDTO.tname=this.gettname(a[0]),this.removeDTO.oldval=a[1],this.removeDTO.column=this.getcolumnname(a[0]),this.removeDTO.newval="Missing Tags",this.removeDTO.maintranid=t.maintranid,this.removeDTO.runid=t.runid,this.removeDTO.taskid=t.taskid,this.changeDTOArray.push(this.removeDTO);"change"==i[0]&&(this.changeDTO={},this.changeDTO.tname=this.gettname(i[1]),this.changeDTO.column=this.getcolumnname(i[1]),this.changeDTO.oldval=i[2][0],this.changeDTO.newval=i[2][1],this.changeDTO.maintranid=t.maintranid,this.changeDTO.runid=t.runid,this.changeDTO.taskid=t.taskid,this.changeDTOArray.push(this.changeDTO))}}this.grouped=this.changeDTOArray.reduce((o,d)=>((o[d.tname]=o[d.tname]||[]).push(d),o),{})}gettname(t){let i=t.replace("INSERTING on FBNK_","");return i=i.replace("UPDATING on FBNK_",""),i=i.replace("DELETING on FBNK_",""),i=i.replace("/row/",""),i.split(":")[0].replace("_",".").replace("001","")}getcolumnname(t){let i=t.replace("INSERTING on FBNK_","");i=i.replace("UPDATING on FBNK_",""),i=i.replace("DELETING on FBNK_",""),i=i.replace("/row/","");let a=i.split(":"),o="";return this.tabledata[a[0].replace("_",".").replace("001","")]?(o=this.tabledata[a[0].replace("_",".").replace("001","")][a[2].toUpperCase()],o):t}onMaintrainid(t,i,a){this.router.navigate(["/reports",{taskid:a,runid:i,tranid:t}])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.Y),e.Y36(m.Z),e.Y36(T.u),e.Y36(p.c9),e.Y36(e.sBO),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-viewdifference"]],decls:17,vars:5,consts:[["activeIds","static-1",1,"next-accordion",3,"closeOthers"],["id","static-1"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"row"],[1,"col-md-6"],[1,"col-sm-12"],["cardTitle","Comparision",3,"options"],[1,"col-md-12"],["action","javascript:"],[4,"ngFor","ngForOf"],["href","javascript:"],[1,"form-group"],["for","exampleFormControlSelect1"],["name","taskid","id","taskid",1,"form-select",3,"ngModel","ngModelChange"],["value","0","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","exampleFormControlSelect2"],["name","runidselect","id","runidselect",1,"form-select",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"table-primary"],[1,"table-light"],[3,"value"],["colspan","2"],["colspan","1"],["colspan","7"],["class","table-light",4,"ngFor","ngForOf"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","blue",3,"value"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","rgb(5, 92, 57)",3,"value"],["type","text","readonly","",2,"width","96%","text-align","left","vertical-align","middle","color","red",3,"value"],[2,"width","96%","text-align","left","vertical-align","middle","color","blue",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ngb-accordion",0)(1,"ngb-panel",1),e.YNc(2,v,3,0,"ng-template",2),e.YNc(3,_,51,11,"ng-template",3),e.qZA()(),e.TgZ(4,"div",4),e._UZ(5,"div",5)(6,"br"),e.TgZ(7,"div",4)(8,"div",6)(9,"app-card",7)(10,"div",4)(11,"div",8)(12,"form",9)(13,"h4"),e._uU(14,"Difference"),e.qZA(),e.YNc(15,C,20,2,"div",10),e.ALo(16,"keyvalue"),e.qZA()()()()()()()),2&t&&(e.Q6J("closeOthers",!0),e.xp6(9),e.Q6J("options",!1),e.xp6(6),e.Q6J("ngForOf",e.lcZ(16,3,i.grouped)))},dependencies:[h.sg,l._Y,l.YN,l.Kr,l.EJ,l.JJ,l.JL,l.On,l.F,Z.A,c.gY,c.Gk,c.Cu,c.gW,h.Nd]}),n})()}];let b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(x),u.Bz]}),n})();var y=s(700);let U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.ez,p.nM,b,y.m,c.lQ,c.Gs]}),n})()}}]);